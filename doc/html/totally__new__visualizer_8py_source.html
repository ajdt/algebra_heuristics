<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>algebra_heuristics: totally_new_visualizer.py Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">algebra_heuristics
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('totally__new__visualizer_8py_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">totally_new_visualizer.py</div>  </div>
</div><!--header-->
<div class="contents">
<a href="totally__new__visualizer_8py.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno"><a class="line" href="namespacetotally__new__visualizer.html">    1</a></span>&#160;<span class="comment">#!/usr/bin/env python</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">##</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"># @author   Armando Diaz Tolentino &lt;ajdt@cs.washington.edu&gt; </span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">#</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"># @brief    A simple visualizer for the equations generated by ASP code in eqn_generator.lp.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">#           This is a reworked version of eqn_viz.py</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">#</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"># @warning  requires asp output in json format. As of gringo4 this is possible with</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">#           clingo --outf=2 &lt;gringo_file.lp&gt;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">#       </span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"># @warning  expects output from stdin, pipe clingo output to this program</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="keyword">import</span> pred_parser</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keyword">import</span> json</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="keyword">import</span> sys</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="keyword">import</span> argparse <span class="comment"># for command line args</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict, namedtuple</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">import</span> explanation_extractor <span class="keyword">as</span> explain</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">from</span> model_manager <span class="keyword">import</span> ModelManager</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">import</span> translate_tree_nodes <span class="keyword">as</span> translator</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"># operator symbols for eqn string generation</span></div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="namespacetotally__new__visualizer.html#a3dd0f4daa013b2acf2fbd1f7aa0ad07c">   25</a></span>&#160;op_symbols      =   {<span class="stringliteral">&#39;add&#39;</span> : <span class="stringliteral">&#39;+&#39;</span> , <span class="stringliteral">&#39;div&#39;</span> : <span class="stringliteral">&#39;/&#39;</span> , <span class="stringliteral">&#39;mul&#39;</span> : <span class="stringliteral">&#39;*&#39;</span> , <span class="stringliteral">&#39;neg&#39;</span> : <span class="stringliteral">&#39;-&#39;</span>}</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"># TODO: remove these once factor predicates are changed too!</span></div>
<div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="namespacetotally__new__visualizer.html#ab706e5502043e33aaccc4cd5db3a11a8">   28</a></span>&#160;factor_predicates = [<span class="stringliteral">&#39;factor&#39;</span> + n <span class="keywordflow">for</span> n <span class="keywordflow">in</span> list(<span class="stringliteral">&#39;1234&#39;</span>)]</div>
<div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="namespacetotally__new__visualizer.html#ac35b4d88f3973e9437d26d620f6404d3">   29</a></span>&#160;factor_name_dict = {<span class="stringliteral">&#39;factor1&#39;</span>:<span class="stringliteral">&#39;FACTORA&#39;</span> , <span class="stringliteral">&#39;factor2&#39;</span>:<span class="stringliteral">&#39;FACTORB&#39;</span>, <span class="stringliteral">&#39;factor3&#39;</span>:<span class="stringliteral">&#39;FACTORX&#39;</span>, <span class="stringliteral">&#39;factor4&#39;</span>:<span class="stringliteral">&#39;FACTORY&#39;</span> }</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"># list of strategies</span></div>
<div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="namespacetotally__new__visualizer.html#a0336db197e4d6b0cc49dd792fa21d890">   32</a></span>&#160;all_strategies = [<span class="stringliteral">&#39;cancel&#39;</span>, <span class="stringliteral">&#39;combine&#39;</span>, <span class="stringliteral">&#39;rearrange&#39;</span>, <span class="stringliteral">&#39;move&#39;</span>, <span class="stringliteral">&#39;expand&#39;</span>]</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"># contains associated methods for parsing a single math problem </span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"># and its solution (same as a single answer set)</span></div>
<div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="namespacetotally__new__visualizer.html#a69a6b4328317f3ea8abc150eafbda370">   35</a></span>&#160;GeneratedStep = namedtuple(<span class="stringliteral">&#39;GeneratedStep&#39;</span>, [<span class="stringliteral">&#39;equation_string&#39;</span>, <span class="stringliteral">&#39;step_data&#39;</span>])</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">##</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"># Parses predicates related to one step of a solution trace</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment"># contains the data members: </span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">#   var_str     --  what variable an equation should be expressed with</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">#   node_data   --  dictionary containing all node info parsed</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">#   strategy_data   --  parsed explanations for the different strategy classes   </span></div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_equation_step_parser.html">   43</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html">EquationStepParser</a>:</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="comment"># @param[in]    var_str     variable to use when constructing equation (typically it&#39;s &#39;x&#39; or &#39;y&#39;)</span></div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a025ac2e5112841d4b340029c120412f2">   46</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a025ac2e5112841d4b340029c120412f2">__init__</a>(self, var_str=&#39;x&#39;):</div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a021358bd55a4cea135012d4a83138711">   47</a></span>&#160;        self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a021358bd55a4cea135012d4a83138711">var_str</a>       = var_str</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        <span class="comment"># contains denom, numer, coeff, degree and other node info from holds predicate</span></div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_equation_step_parser.html#ad7bb7147eedff025bb568ecb8826ce08">   49</a></span>&#160;        self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#ad7bb7147eedff025bb568ecb8826ce08">node_data</a>      =   defaultdict(defaultdict)</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        <span class="comment"># miscellaneous step information that will be recorded/saved</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <span class="comment"># TODO: misc_data initialization getting too complex, change it?</span></div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a9fd629de7e40b3f7764fb91e9d1c7962">   52</a></span>&#160;        self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a9fd629de7e40b3f7764fb91e9d1c7962">misc_data</a>      = {<span class="stringliteral">&#39;operands&#39;</span>:[], <span class="stringliteral">&#39;action&#39;</span>:<span class="stringliteral">&#39;&#39;</span>, <span class="stringliteral">&#39;factor_data&#39;</span>: {}, <span class="stringliteral">&#39;explanation&#39;</span>:[], <span class="stringliteral">&#39;time&#39;</span>:<span class="stringliteral">&#39;&#39;</span>}</div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_equation_step_parser.html#ac5cad9ea5ae6ed0d1c86a506b0a0e76e">   53</a></span>&#160;        self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#ac5cad9ea5ae6ed0d1c86a506b0a0e76e">strategy_data</a>  = defaultdict(list)</div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a1d2445c87a6b9d8400ef8c78ea2e5919">   54</a></span>&#160;        self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a1d2445c87a6b9d8400ef8c78ea2e5919">optimal_action</a> = <span class="stringliteral">&#39;&#39;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_equation_step_parser.html#adcf8eb027974aa76205cbd1e42604919">   55</a></span>&#160;        self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#adcf8eb027974aa76205cbd1e42604919">optimal_operands</a> = []</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="comment"># @param[in]    new_var     new variable string to use</span></div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a7fd1c20efb5a99c2198f0731c9c9aba1">   59</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a7fd1c20efb5a99c2198f0731c9c9aba1">updateVariable</a>(self, new_var):</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a021358bd55a4cea135012d4a83138711">var_str</a> = new_var</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="comment"># EquationStepParser contains lots of data we don&#39;t need after parsing</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="comment"># this method returns a GeneratedStep instance that has only what we want to save</span></div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_equation_step_parser.html#acdeafbce50645287ac85046e93191c5a">   65</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#acdeafbce50645287ac85046e93191c5a">toGeneratedStep</a>(self):</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="comment"># add strategy_data and return generated step instance</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a9fd629de7e40b3f7764fb91e9d1c7962">misc_data</a>[<span class="stringliteral">&#39;strategy_data&#39;</span>] = dict(self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#ac5cad9ea5ae6ed0d1c86a506b0a0e76e">strategy_data</a>)</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacetotally__new__visualizer.html#a69a6b4328317f3ea8abc150eafbda370">GeneratedStep</a>(self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#ad4a30f362747a194b4f3e36ca5ddc238">getEqnString</a>(), self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a9fd629de7e40b3f7764fb91e9d1c7962">misc_data</a>)</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="comment">## </span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="comment"># save field/value info for a node that is expressed as a holds/2 predicate</span></div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a8e28e68df8ed9c7a34890d4ae6a6e2b9">   72</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a8e28e68df8ed9c7a34890d4ae6a6e2b9">addHoldsPredicate</a>(self, holds_pred):</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        node_id, field, value   = <a class="code" href="namespacepred__parser.html#a2a6fff2c8801ac4b209b04d97653a9d8">pred_parser.holdsObjectToNodeFieldValue</a>(holds_pred)</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        node_data_dict          = self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#ad7bb7147eedff025bb568ecb8826ce08">node_data</a>[node_id]</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <span class="comment"># a node has many activechild values, only one for every other field</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keywordflow">if</span> field == <span class="stringliteral">&#39;activechild&#39;</span> <span class="keywordflow">and</span> <span class="stringliteral">&#39;activechild&#39;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> node_data_dict.keys():</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            node_data_dict[field] = [value]</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="keywordflow">elif</span> field == <span class="stringliteral">&#39;activechild&#39;</span>:</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            node_data_dict[field].append(value)</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            node_data_dict[field] = value</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="comment"># Add a predicate of the type &#39;strategyExplanation&#39;.</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="comment"># These predicates help explain why a certain operation was chosen over others</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="comment"># @param[in] pred_obj an instance of Predicate namedtuple in pred_parser module</span></div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a0ea8c9f9125d10c34db60080cb98087e">   88</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a0ea8c9f9125d10c34db60080cb98087e">addStrategyPredicate</a>(self, pred_obj):</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        strategy_pred = pred_obj.args[1]</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        strategy_name = strategy_pred.args[0].name</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        strategy_desc = explain.convertFromCamelCase(strategy_pred.name).replace(<span class="stringliteral">&#39;strategy&#39;</span>, strategy_name)</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        has_heur_instance = len(strategy_pred.args) == 2</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <span class="keywordflow">if</span> has_heur_instance:</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            heur_obj    = <a class="code" href="namespacepred__parser.html#a918636a789322106c44f3ab3a40c4eb3">pred_parser.findInArgList</a>(strategy_pred, <span class="stringliteral">&#39;rule&#39;</span>)</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            <span class="keywordflow">try</span>:</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                operand_obj = <a class="code" href="namespacepred__parser.html#a918636a789322106c44f3ab3a40c4eb3">pred_parser.findInArgList</a>(heur_obj, <span class="stringliteral">&#39;operands&#39;</span>)</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            <span class="keywordflow">except</span> AttributeError:</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                <span class="keywordflow">print</span> <span class="stringliteral">&#39;error with operands of:&#39;</span>, pred_obj</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                sys.exit()</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            operand_list = <a class="code" href="namespacepred__parser.html#a97b4149316ed6221e074bffd1d58e43c">pred_parser.argsToListOfStrings</a>(operand_obj)</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#ac5cad9ea5ae6ed0d1c86a506b0a0e76e">strategy_data</a>[strategy_name].append([strategy_desc, operand_list])</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            <span class="comment"># predicate indicates what we cannot do for the given time step</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#ac5cad9ea5ae6ed0d1c86a506b0a0e76e">strategy_data</a>[strategy_name].append([strategy_desc + <span class="stringliteral">&#39; &#39;</span> + strategy_name, []])</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment"># Top level method called externally to add any predicate related to this time step</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="comment"># @param[in] pred_obj an instance of Predicate namedtuple in pred_parser module</span></div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_equation_step_parser.html#ae60e437d9daae3ce0a8dae2fd8e60260">  110</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#ae60e437d9daae3ce0a8dae2fd8e60260">addParsedPredicate</a>(self, pred_obj):</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keywordflow">if</span> pred_obj.name == <span class="stringliteral">&#39;selectedHeurOperands&#39;</span>:</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            <span class="comment"># get time object and operands as strings, then add to relevant time step</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            operand_pred_obj            = <a class="code" href="namespacepred__parser.html#a918636a789322106c44f3ab3a40c4eb3">pred_parser.findInArgList</a>(pred_obj, <span class="stringliteral">&#39;operands&#39;</span>)</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a9fd629de7e40b3f7764fb91e9d1c7962">misc_data</a>[<span class="stringliteral">&#39;operands&#39;</span>]  = <a class="code" href="namespacepred__parser.html#a97b4149316ed6221e074bffd1d58e43c">pred_parser.argsToListOfStrings</a>(operand_pred_obj)</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="keywordflow">elif</span> pred_obj.name == <span class="stringliteral">&#39;holds&#39;</span>:</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a8e28e68df8ed9c7a34890d4ae6a6e2b9">addHoldsPredicate</a>(pred_obj)</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="keywordflow">elif</span> pred_obj.name == <span class="stringliteral">&#39;selectedHeuristic&#39;</span> <span class="keywordflow">and</span> len(pred_obj.args) == 2:</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            <span class="comment"># NOTE: two versions of selectedHeuristic, we want the one with arity = 2</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            time, action = <a class="code" href="namespacepred__parser.html#a97b4149316ed6221e074bffd1d58e43c">pred_parser.argsToListOfStrings</a>(pred_obj)</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a9fd629de7e40b3f7764fb91e9d1c7962">misc_data</a>[<span class="stringliteral">&#39;action&#39;</span>]    = action</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a9fd629de7e40b3f7764fb91e9d1c7962">misc_data</a>[<span class="stringliteral">&#39;time&#39;</span>]      = time</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="keywordflow">elif</span> pred_obj.name <span class="keywordflow">in</span> factor_predicates:</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            time, degree, coeff = <a class="code" href="namespacepred__parser.html#a97b4149316ed6221e074bffd1d58e43c">pred_parser.argsToListOfStrings</a>(pred_obj)</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            factor_data_key = factor_name_dict[pred_obj.name]</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            monomial_factor = EquationStepParser.makeMonomialFromData(degree, coeff)</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a9fd629de7e40b3f7764fb91e9d1c7962">misc_data</a>[<span class="stringliteral">&#39;factor_data&#39;</span>][factor_data_key] = monomial_factor</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="keywordflow">elif</span> pred_obj.name == <span class="stringliteral">&#39;strategyExplanation&#39;</span>:</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a0ea8c9f9125d10c34db60080cb98087e">addStrategyPredicate</a>(pred_obj)</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="keywordflow">elif</span> pred_obj.name == <span class="stringliteral">&#39;optimalHeuristicInstance&#39;</span>:</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            <span class="comment">#print &#39;fancy fancy&#39;, pred_obj</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            heur_inst = <a class="code" href="namespacepred__parser.html#a918636a789322106c44f3ab3a40c4eb3">pred_parser.findInArgList</a>(pred_obj, <span class="stringliteral">&#39;rule&#39;</span>)</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a1d2445c87a6b9d8400ef8c78ea2e5919">optimal_action</a> = heur_inst.args[0].name</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#adcf8eb027974aa76205cbd1e42604919">optimal_operands</a> = <a class="code" href="namespacepred__parser.html#a97b4149316ed6221e074bffd1d58e43c">pred_parser.argsToListOfStrings</a>(heur_inst.args[1])</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="comment"># For every strategy we don&#39;t have an explanation for, see if we have any </span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="comment"># &#39;almost fire&#39; explanations</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="comment"># @param[in] model_mgr manages all predicates true for this time step</span></div>
<div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a0a9f53c1c140fecd4e5d6bd6bda9ae7e">  139</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a0a9f53c1c140fecd4e5d6bd6bda9ae7e">makeAlmostFireExplanations</a>(self, model_mgr):</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keywordflow">for</span> strat <span class="keywordflow">in</span> all_strategies:</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            <span class="keywordflow">if</span> strat <span class="keywordflow">not</span> <span class="keywordflow">in</span> self.strategy_data.keys(): <span class="comment"># strategy type has no explanation</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a51372d5ce7c1fec1c4a1a7f7f8bfe3de">makeAlmostFireExplanationFor</a>(strat, model_mgr)</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="comment"># For a given strategy check all heuristics in that strategy type</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="comment"># to see if any of them almost fire</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="comment"># @param[in] strategy string representing strategy class</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="comment"># @param[in] model_mgr manages all predicates true for this time step</span></div>
<div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a51372d5ce7c1fec1c4a1a7f7f8bfe3de">  149</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a51372d5ce7c1fec1c4a1a7f7f8bfe3de">makeAlmostFireExplanationFor</a>(self, strategy, model_mgr):</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="comment"># for each heuristic in the strategy class see if it almost fires</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keywordflow">for</span> heur <span class="keywordflow">in</span> explain.strategy_to_heuristic[strategy]:</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            pred_key    = explain.getTemplateManager().lookupHeuristicKey(heur)</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            almost_fire = explain.makeAlmostFireExplanations(pred_key, model_mgr)</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            <span class="comment"># add almost_fires explanation</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#ac5cad9ea5ae6ed0d1c86a506b0a0e76e">strategy_data</a>[strategy] += almost_fire</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            <span class="keywordflow">if</span> almost_fire != [] :</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                <span class="keywordflow">print</span> <span class="stringliteral">&#39;this heuristic almost fired: &#39;</span>, heur</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="comment">## </span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="comment"># handles all post-processing after step parser</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="comment"># has received all predicates for this step</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="comment"># NOTE: must be called externally</span></div>
<div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_equation_step_parser.html#aef1f6ba0922d50500fcf66e026effede">  163</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#aef1f6ba0922d50500fcf66e026effede">postProcessStepData</a>(self, model_mgr):</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a0a9f53c1c140fecd4e5d6bd6bda9ae7e">makeAlmostFireExplanations</a>(model_mgr)</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a25048323c9f80cbb0ea140985dfc1333">translateStrategyData</a>()</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a3c973167ae47c603bf5f6ed2e04eea10">makeExplanation</a>(model_mgr)</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="comment"># XXX: hacky bug fix: get rid of duplicates in strategy data explanations</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keywordflow">for</span> key <span class="keywordflow">in</span> self.strategy_data.keys():</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            expl = [ (s, tuple(op)) <span class="keywordflow">for</span> s, op <span class="keywordflow">in</span> self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#ac5cad9ea5ae6ed0d1c86a506b0a0e76e">strategy_data</a>[key] ]</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            tup_expl = list(set(expl))</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            temp =  [ [s, list(op)] <span class="keywordflow">for</span> s, op <span class="keywordflow">in</span> tup_expl]</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            <span class="comment"># reverse sorting ensures &#39;we will&#39; explanation ends up after </span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            <span class="comment"># &#39;yes we can&#39; explanations</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#ac5cad9ea5ae6ed0d1c86a506b0a0e76e">strategy_data</a>[key] = sorted(temp, reverse=<span class="keyword">True</span>)</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="comment"># @param[in] as_latex depricated</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="comment"># @param[in] json_output depricated</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="comment"># @return a string representation of the equation at this step</span></div>
<div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_equation_step_parser.html#ad4a30f362747a194b4f3e36ca5ddc238">  182</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#ad4a30f362747a194b4f3e36ca5ddc238">getEqnString</a>(self, as_latex=False, json_output=False):</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        left    = self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a4d4b598b9a729895cdaadae73f407d83">makeEqnString</a>(<span class="stringliteral">&#39;id(1,1)&#39;</span>)</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        right   = self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a4d4b598b9a729895cdaadae73f407d83">makeEqnString</a>(<span class="stringliteral">&#39;id(1,2)&#39;</span>)</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="comment"># NOTE: slicing to avoid outermost parens</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">if</span> left[0] == <span class="stringliteral">&#39;(&#39;</span>:</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            left = left[1:-1]</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <span class="keywordflow">if</span> right[0] == <span class="stringliteral">&#39;(&#39;</span>:</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            right = right[1:-1]</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        string = left + <span class="stringliteral">&#39;=&#39;</span> + right</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="keywordflow">return</span> str(string)</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="comment"># use translator from translate_tree_nodes module to convert the</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="comment"># node id&#39;s in node_data to a binary tree representation</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="comment"># NOTE: this is necessary b/c Nell uses a binary tree to represent an equation</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="comment"># but the internal nodes in my expression trees can have any number of children</span></div>
<div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a25048323c9f80cbb0ea140985dfc1333">  198</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a25048323c9f80cbb0ea140985dfc1333">translateStrategyData</a>(self): </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        trans = translator.getTranslationsForNodeData(self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#ad7bb7147eedff025bb568ecb8826ce08">node_data</a>)</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="keywordflow">for</span> strategy, explanation <span class="keywordflow">in</span> self.strategy_data.items():</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            <span class="comment"># NOTE: sort so that when multiple terms can be operated on, the selected</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            <span class="comment"># terms are last</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            new_sentences = self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#aef7a56859ca1922b836ddd56370288bb">translateSingleExplanation</a>(explanation, trans) </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            new_sentences.sort(reverse=<span class="keyword">True</span>)</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#ac5cad9ea5ae6ed0d1c86a506b0a0e76e">strategy_data</a>[strategy] = new_sentences</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="comment"># XXX:</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="comment"># NOTE: remove this is a hacky solution to dealing with explanations for</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="comment"># suboptimal problems</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        translated_optimal = [] </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="keywordflow">for</span> node <span class="keywordflow">in</span> self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#adcf8eb027974aa76205cbd1e42604919">optimal_operands</a>:</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <span class="keywordflow">if</span> node <span class="keywordflow">in</span> trans.keys():</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                translated_optimal.append(trans[node])</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                translated_optimal.append(node)</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#adcf8eb027974aa76205cbd1e42604919">optimal_operands</a> = translated_optimal</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="comment"># uses model manager to lookup an explanation template for the action taken</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="comment"># in this step, to explain why we can perform the selected operation for this step</span></div>
<div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a3c973167ae47c603bf5f6ed2e04eea10">  221</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a3c973167ae47c603bf5f6ed2e04eea10">makeExplanation</a>(self, model_mgr):</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a9fd629de7e40b3f7764fb91e9d1c7962">misc_data</a>[<span class="stringliteral">&#39;action&#39;</span>] == <span class="stringliteral">&#39;&#39;</span>: <span class="comment"># final step has no explanation</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            <span class="keywordflow">return</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        all_operands    = [self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a9fd629de7e40b3f7764fb91e9d1c7962">misc_data</a>[<span class="stringliteral">&#39;time&#39;</span>]] + list(self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a9fd629de7e40b3f7764fb91e9d1c7962">misc_data</a>[<span class="stringliteral">&#39;operands&#39;</span>])</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        condition       = self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a9fd629de7e40b3f7764fb91e9d1c7962">misc_data</a>[<span class="stringliteral">&#39;action&#39;</span>]</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        arity           = len(all_operands)</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        template_key    = (condition, arity)</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <span class="comment"># get manager and sentence templates</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        template_mgr    = explain.getTemplateManager()</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        template        = template_mgr.lookupTemplateFor(template_key)</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        sentence_temp   = template.makeExplanation(all_operands, model_mgr, 1, self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a9fd629de7e40b3f7764fb91e9d1c7962">misc_data</a>[<span class="stringliteral">&#39;factor_data&#39;</span>])</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="comment"># NOTE: we have to translate the node ids used by the explanation sentences</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="comment"># Nell&#39;s code uses a binary tree representation, my ASP representation </span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="comment"># allows for trees with 3 or more children</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        explanation    = [ temp.getSentenceFragments() <span class="keywordflow">for</span> temp <span class="keywordflow">in</span> sentence_temp]</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="comment"># translate explanations and operands</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <span class="comment"># TODO: translation of operands should happen elsewhere?? !!!!</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        translation_dict = translator.getTranslationsForNodeData(self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#ad7bb7147eedff025bb568ecb8826ce08">node_data</a>)</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a9fd629de7e40b3f7764fb91e9d1c7962">misc_data</a>[<span class="stringliteral">&#39;explanation&#39;</span>] = self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#aef7a56859ca1922b836ddd56370288bb">translateSingleExplanation</a>(explanation, translation_dict)</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a9fd629de7e40b3f7764fb91e9d1c7962">misc_data</a>[<span class="stringliteral">&#39;operands&#39;</span>] = self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#aee458203f9e3923538d93d619a09894c">translateListOfStrings</a>(self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a9fd629de7e40b3f7764fb91e9d1c7962">misc_data</a>[<span class="stringliteral">&#39;operands&#39;</span>], translation_dict)</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="comment">## </span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="comment"># translates a single explanation array to use binary nodes</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="comment"># an explanation array is a list of elements that look like:</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="comment"># [explanation_string, [list_of_operands]]</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="comment"># @param[in] explanation_sentences a list of [explanation_string, [list_of_operands]] elements</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="comment"># @param[in] translations a hashmap with mappings old_node_id --&gt; new_node_id</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="comment"># @return a list of explanation sentences with the nodes changed to Nell&#39;s format</span></div>
<div class="line"><a name="l00253"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_equation_step_parser.html#aef7a56859ca1922b836ddd56370288bb">  253</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#aef7a56859ca1922b836ddd56370288bb">translateSingleExplanation</a>(self, explanation_sentences, translations):</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <span class="comment"># a single sentence looks like [&#39;string explanation&#39;, [list_of_node_id_strings]]</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="comment"># explanation_sentences contains several such entries</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        translate_sentence = <span class="keyword">lambda</span> sent_data: [sent_data[0], self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#aee458203f9e3923538d93d619a09894c">translateListOfStrings</a>(sent_data[1], translations)]</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="keywordflow">return</span> map(translate_sentence, explanation_sentences)</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="comment"># translate a list of strings so nodes match a binary tree representation</span></div>
<div class="line"><a name="l00261"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_equation_step_parser.html#aee458203f9e3923538d93d619a09894c">  261</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#aee458203f9e3923538d93d619a09894c">translateListOfStrings</a>(self, string_list, translations):</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        transform_fnc = <span class="keyword">lambda</span> st : translations[st] <span class="keywordflow">if</span> st <span class="keywordflow">in</span> translations.keys() <span class="keywordflow">else</span> st</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="keywordflow">return</span> map(transform_fnc, string_list)</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="comment"># generates the string representation of a subexpression</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="comment"># @param[in] root_node the node id (ex: &#39;id(1,2)&#39; ) of the subexpression&#39;s root</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="comment"># @return a string representing the subexpression</span></div>
<div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a4d4b598b9a729895cdaadae73f407d83">  269</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a4d4b598b9a729895cdaadae73f407d83">makeEqnString</a>(self, root_node):</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        node_type = self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#ad7bb7147eedff025bb568ecb8826ce08">node_data</a>[root_node][<span class="stringliteral">&#39;type&#39;</span>]</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <span class="keywordflow">if</span> node_type == <span class="stringliteral">&#39;mono&#39;</span>:</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            <span class="keywordflow">return</span>  self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a2eb2f89d46d274c80c7930a5f5fc9623">makeMonomial</a>(root_node) </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="comment"># root node is a fraction, ensure numer and denom are put together correctly</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="keywordflow">if</span> node_type == <span class="stringliteral">&#39;div&#39;</span>:</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            numer = self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#ad7bb7147eedff025bb568ecb8826ce08">node_data</a>[root_node][<span class="stringliteral">&#39;numer&#39;</span>]</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            denom = self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#ad7bb7147eedff025bb568ecb8826ce08">node_data</a>[root_node][<span class="stringliteral">&#39;denom&#39;</span>]</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            oper_symbol = op_symbols[node_type]</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&#39;(&#39;</span> + self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a4d4b598b9a729895cdaadae73f407d83">makeEqnString</a>(numer) + oper_symbol + self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a4d4b598b9a729895cdaadae73f407d83">makeEqnString</a>(denom) + <span class="stringliteral">&#39;)&#39;</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="keywordflow">else</span>: <span class="comment"># root_node is an add, neg or mul node</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            child_strings = [self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a4d4b598b9a729895cdaadae73f407d83">makeEqnString</a>(child) <span class="keywordflow">for</span> child <span class="keywordflow">in</span> self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#ad7bb7147eedff025bb568ecb8826ce08">node_data</a>[root_node][<span class="stringliteral">&#39;activechild&#39;</span>]]</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            <span class="comment"># compose a string representation of every child first</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            oper_symbol = op_symbols[node_type]</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            <span class="comment"># negation nodes have only one child</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            <span class="keywordflow">if</span> node_type == <span class="stringliteral">&#39;neg&#39;</span>:</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                <span class="keywordflow">return</span> oper_symbol + <span class="stringliteral">&#39;(&#39;</span> + oper_symbol + <span class="stringliteral">&#39;)&#39;</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            <span class="keywordflow">else</span>: </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&#39;(&#39;</span> + oper_symbol.join(child_strings) + <span class="stringliteral">&#39;)&#39;</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="comment"># make a monomial string</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="comment"># @param[in] deg string representing degree</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="comment"># @param[in] coeff string representing coefficient</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="comment"># @param[in] var_str string representing what variable name to use</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00296"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a8aaaf60180dffc7f531cd56df9bcc891">  296</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a8aaaf60180dffc7f531cd56df9bcc891">makeMonomialFromData</a>(deg, coeff, var_str=&#39;x&#39;):</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="keywordflow">if</span> coeff == <span class="stringliteral">&#39;0&#39;</span> <span class="keywordflow">or</span> deg == <span class="stringliteral">&#39;0&#39;</span>:</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            <span class="keywordflow">return</span> coeff</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordflow">elif</span> deg == <span class="stringliteral">&#39;1&#39;</span> <span class="keywordflow">and</span> coeff == <span class="stringliteral">&#39;1&#39;</span>:</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            <span class="keywordflow">return</span> var_str</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="keywordflow">elif</span> deg == <span class="stringliteral">&#39;1&#39;</span> <span class="keywordflow">and</span> coeff == <span class="stringliteral">&#39;-1&#39;</span>:</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&#39;-&#39;</span>+var_str</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="keywordflow">elif</span> coeff == <span class="stringliteral">&#39;1&#39;</span>:</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            <span class="keywordflow">return</span> var_str + <span class="stringliteral">&#39;^&#39;</span> + deg</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keywordflow">elif</span> coeff == <span class="stringliteral">&#39;-1&#39;</span>:</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&#39;-&#39;</span>+var_str + <span class="stringliteral">&#39;^&#39;</span> + deg</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="keywordflow">elif</span> deg == <span class="stringliteral">&#39;1&#39;</span>:</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <span class="keywordflow">return</span> coeff + var_str</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            <span class="keywordflow">return</span>  coeff + var_str + <span class="stringliteral">&#39;^&#39;</span> + deg</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="comment"># @param[in] node_name the node id to get a monomial string for</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="comment"># @return the monomial string representing the given node id</span></div>
<div class="line"><a name="l00315"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a2eb2f89d46d274c80c7930a5f5fc9623">  315</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a2eb2f89d46d274c80c7930a5f5fc9623">makeMonomial</a>(self, node_name):</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="stringliteral">&quot;&quot;&quot; Given a node name, construct the monomial referenced by that node&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        deg     = self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#ad7bb7147eedff025bb568ecb8826ce08">node_data</a>[node_name][<span class="stringliteral">&#39;degree&#39;</span>]</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        coeff   = self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#ad7bb7147eedff025bb568ecb8826ce08">node_data</a>[node_name][<span class="stringliteral">&#39;coeff&#39;</span>]</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keywordflow">return</span> EquationStepParser.makeMonomialFromData(deg, coeff, self.<a class="code" href="classtotally__new__visualizer_1_1_equation_step_parser.html#a021358bd55a4cea135012d4a83138711">var_str</a>)</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div>
<div class="line"><a name="l00321"></a><span class="lineno"><a class="line" href="namespacetotally__new__visualizer.html#ab9dc95295259f8165e1fdf15f954d2b1">  321</a></span>&#160;GeneratedSolution = namedtuple(<span class="stringliteral">&#39;GeneratedSolution&#39;</span>, [<span class="stringliteral">&#39;problem_string&#39;</span>, <span class="stringliteral">&#39;solution_steps&#39;</span>])</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">##</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment"># Handles the parsing of a single generated problem.</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment"># This is the same as a single generated answer set.</span></div>
<div class="line"><a name="l00326"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_problem_parser.html">  326</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtotally__new__visualizer_1_1_problem_parser.html">ProblemParser</a>(object):</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="comment"># @param[in] answer_set_predicates a list of strings, each string is a predicate</span></div>
<div class="line"><a name="l00329"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_problem_parser.html#a8c74392fb4a04b5c3215fa594c1a223d">  329</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_problem_parser.html#a8c74392fb4a04b5c3215fa594c1a223d">__init__</a>(self, answer_set_predicates):</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        super(ProblemParser, self).<a class="code" href="classtotally__new__visualizer_1_1_problem_parser.html#a8c74392fb4a04b5c3215fa594c1a223d">__init__</a>()</div>
<div class="line"><a name="l00331"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_problem_parser.html#a2922e97837374aee68052070231aa978">  331</a></span>&#160;        self.<a class="code" href="classtotally__new__visualizer_1_1_problem_parser.html#a2922e97837374aee68052070231aa978">solution_steps</a> = defaultdict(EquationStepParser)</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <span class="comment"># data members used to store solutions and info about substitutions</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        <span class="comment"># this info is not saved in GeneratedSolution objects</span></div>
<div class="line"><a name="l00335"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_problem_parser.html#a63fff6bd2c3015c278433317fc7c8e32">  335</a></span>&#160;        self.<a class="code" href="classtotally__new__visualizer_1_1_problem_parser.html#a63fff6bd2c3015c278433317fc7c8e32">sub_data</a>                   = {}</div>
<div class="line"><a name="l00336"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_problem_parser.html#a27138f0c72c9ab44f6e951b63159b05f">  336</a></span>&#160;        self.<a class="code" href="classtotally__new__visualizer_1_1_problem_parser.html#a27138f0c72c9ab44f6e951b63159b05f">soln_list</a>                  = []</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <span class="comment"># parse all the incoming predicates</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        self.<a class="code" href="classtotally__new__visualizer_1_1_problem_parser.html#a9ebe340d4c51febfe4b32a167d97e353">parseAnsSetFromPredicates</a>(answer_set_predicates)</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="comment"># EquationStepParser contains lots of data we don&#39;t need after parsing</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="comment"># this method returns a GeneratedStep instance that has only what we want to save</span></div>
<div class="line"><a name="l00344"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_problem_parser.html#ada04c87da73191c9d9dd21f4bc7adbb9">  344</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_problem_parser.html#ada04c87da73191c9d9dd21f4bc7adbb9">toGeneratedSolution</a>(self):</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        sorted_steps = [ step <span class="keywordflow">for</span> step_num, step <span class="keywordflow">in</span> sorted(self.solution_steps.items()) ]</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        generated_steps = [ step.toGeneratedStep() <span class="keywordflow">for</span> step <span class="keywordflow">in</span> sorted_steps]</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <span class="comment">## NOTE: should really happen in post-processing, move if this function gets too large</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <span class="comment">#x_soln = self.getXSolnIfSubstitutionOccurs()</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="comment">#if x_soln != None:</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            <span class="comment">#generated_steps.append(x_soln)</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacetotally__new__visualizer.html#ab9dc95295259f8165e1fdf15f954d2b1">GeneratedSolution</a>(self.<a class="code" href="classtotally__new__visualizer_1_1_problem_parser.html#a07434850dc97a708cd945df0e3be195d">getProblem</a>(), generated_steps)</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="comment"># @param[in] pred_obj a predicate object to add to an EquationStepParser</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="comment"># @param[in] time an instance of pred_parser.Time the time step of the predicate</span></div>
<div class="line"><a name="l00356"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_problem_parser.html#a3c480d50bf72818a2db48543b431bcbc">  356</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_problem_parser.html#a3c480d50bf72818a2db48543b431bcbc">addPredicateForTimeStep</a>(self, time, pred_obj):</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        self.<a class="code" href="classtotally__new__visualizer_1_1_problem_parser.html#a2922e97837374aee68052070231aa978">solution_steps</a>[time.step].addParsedPredicate(pred_obj)</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="comment"># parse the given predicates into the steps the describe</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="comment"># @param[in] predicates_list a list of predicate strings</span></div>
<div class="line"><a name="l00362"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_problem_parser.html#a9ebe340d4c51febfe4b32a167d97e353">  362</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_problem_parser.html#a9ebe340d4c51febfe4b32a167d97e353">parseAnsSetFromPredicates</a>(self, predicates_list):</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="stringliteral">&quot;&quot;&quot; compose as a string every solution in the predicate list given&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        model_mgr = <a class="code" href="classmodel__manager_1_1_model_manager.html">ModelManager</a>()</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <span class="comment"># parse predicates for each time step</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="comment"># TODO: add applicable and selected heuristics</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="keywordflow">for</span> predicate_string <span class="keywordflow">in</span> predicates_list:</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            pred_obj    = <a class="code" href="namespacepred__parser.html#aafbae146acf181131bb122c749d70997">pred_parser.predicateStringToParsedPredicate</a>(predicate_string)</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            time        = <a class="code" href="namespacepred__parser.html#a29597ce97183f1be99e6a96d16d767db">pred_parser.getTimeFromPredObject</a>(pred_obj)</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            <span class="keywordflow">if</span> time != <span class="keywordtype">None</span>:</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                self.<a class="code" href="classtotally__new__visualizer_1_1_problem_parser.html#a3c480d50bf72818a2db48543b431bcbc">addPredicateForTimeStep</a>(time, pred_obj)</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            <span class="comment"># look for substitution data, to swap variables</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            <span class="keywordflow">if</span> pred_obj.name == <span class="stringliteral">&#39;substitutedDegree&#39;</span>:</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                _, degree = <a class="code" href="namespacepred__parser.html#a97b4149316ed6221e074bffd1d58e43c">pred_parser.argsToListOfStrings</a>(pred_obj)</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                self.<a class="code" href="classtotally__new__visualizer_1_1_problem_parser.html#a63fff6bd2c3015c278433317fc7c8e32">sub_data</a>[<span class="stringliteral">&#39;degree&#39;</span>] = degree</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                self.<a class="code" href="classtotally__new__visualizer_1_1_problem_parser.html#a63fff6bd2c3015c278433317fc7c8e32">sub_data</a>[<span class="stringliteral">&#39;step&#39;</span>] = int(time.step)</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            <span class="keywordflow">if</span> pred_obj.name == <span class="stringliteral">&#39;solutionValue&#39;</span> :</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                <span class="comment"># rational numbers are represented as numer, denom ordered pairs</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                _, numer, denom = <a class="code" href="namespacepred__parser.html#a97b4149316ed6221e074bffd1d58e43c">pred_parser.argsToListOfStrings</a>(pred_obj)</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                soln_value      = numer <span class="keywordflow">if</span> denom == <span class="stringliteral">&#39;1&#39;</span> <span class="keywordflow">else</span> numer +<span class="stringliteral">&#39;/&#39;</span> + denom </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                self.soln_list.append(soln_value)</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            <span class="comment"># add predicate to model manager</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            model_mgr.addPredicate(predicate_string)</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <span class="comment"># handle post processing at solution level, and step level</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        self.<a class="code" href="classtotally__new__visualizer_1_1_problem_parser.html#ae641da32655919b48a93bb263a565157">solutionLevelPostProcessing</a>()</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <span class="keywordflow">for</span> eqn_step <span class="keywordflow">in</span> self.solution_steps.values():</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            eqn_step.postProcessStepData(model_mgr)</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="comment"># After all predicates are parsed, see if any post-processing needs to be done</span></div>
<div class="line"><a name="l00395"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_problem_parser.html#ae641da32655919b48a93bb263a565157">  395</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_problem_parser.html#ae641da32655919b48a93bb263a565157">solutionLevelPostProcessing</a>(self):</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        self.<a class="code" href="classtotally__new__visualizer_1_1_problem_parser.html#afcfb1a63e8fe352e8e9a2737ea1654f5">updateVariablesIfSubstitutionOccurs</a>()</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="comment">## </span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="comment"># Add soulutions for x if y-substitution is used; solver only solves for y</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="comment"># if y substitution is used</span></div>
<div class="line"><a name="l00401"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_problem_parser.html#aac1f2db24f810523852a67dbb69bfe5f">  401</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_problem_parser.html#aac1f2db24f810523852a67dbb69bfe5f">getXSolnIfSubstitutionOccurs</a>(self):</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classtotally__new__visualizer_1_1_problem_parser.html#a63fff6bd2c3015c278433317fc7c8e32">sub_data</a> == {}:</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            <span class="keywordflow">return</span> <span class="keywordtype">None</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <span class="comment"># root prefixes used to express root order</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <span class="comment"># TODO: move elsewhere</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        root_prefixes = {<span class="stringliteral">&#39;2&#39;</span>: <span class="stringliteral">&#39;2nd&#39;</span>, <span class="stringliteral">&#39;3&#39;</span>:<span class="stringliteral">&#39;3rd&#39;</span> }</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        root_prefixes.update(dict([(l, l+<span class="stringliteral">&#39;th&#39;</span>) <span class="keywordflow">for</span> l <span class="keywordflow">in</span> list(<span class="stringliteral">&#39;456789&#39;</span>)]))</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        prefix = root_prefixes[self.<a class="code" href="classtotally__new__visualizer_1_1_problem_parser.html#a63fff6bd2c3015c278433317fc7c8e32">sub_data</a>[<span class="stringliteral">&#39;degree&#39;</span>]] + <span class="stringliteral">&#39; root of &#39;</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        x_solutions = <span class="stringliteral">&#39;, &#39;</span>.join([prefix + s <span class="keywordflow">for</span> s <span class="keywordflow">in</span> self.<a class="code" href="classtotally__new__visualizer_1_1_problem_parser.html#a27138f0c72c9ab44f6e951b63159b05f">soln_list</a>])</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        x_soln_str =<span class="stringliteral">&#39;x = &#39;</span> + x_solutions</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacetotally__new__visualizer.html#a69a6b4328317f3ea8abc150eafbda370">GeneratedStep</a>(x_soln_str, {})</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="comment">## </span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="comment"># if y-substitution is used, update the variable used for each </span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="comment"># step after the substitution</span></div>
<div class="line"><a name="l00417"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_problem_parser.html#afcfb1a63e8fe352e8e9a2737ea1654f5">  417</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_problem_parser.html#afcfb1a63e8fe352e8e9a2737ea1654f5">updateVariablesIfSubstitutionOccurs</a>(self):</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classtotally__new__visualizer_1_1_problem_parser.html#a63fff6bd2c3015c278433317fc7c8e32">sub_data</a> != {}: <span class="comment"># a substitution was performed</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            sub_step = self.<a class="code" href="classtotally__new__visualizer_1_1_problem_parser.html#a63fff6bd2c3015c278433317fc7c8e32">sub_data</a>[<span class="stringliteral">&#39;step&#39;</span>]</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            to_change = filter(<span class="keyword">lambda</span> k : int(k) &gt; sub_step, self.solution_steps.keys())</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            <span class="keywordflow">for</span> step <span class="keywordflow">in</span> to_change:</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                self.<a class="code" href="classtotally__new__visualizer_1_1_problem_parser.html#a2922e97837374aee68052070231aa978">solution_steps</a>[step].updateVariable(<span class="stringliteral">&#39;y&#39;</span>)</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="comment">##</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="comment"># TODO: for debugging purposes only, remove later!!</span></div>
<div class="line"><a name="l00426"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_problem_parser.html#a922001a638e085fc2ab3e08254eb60de">  426</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_problem_parser.html#a922001a638e085fc2ab3e08254eb60de">getSolutionString</a>(self, as_latex=False, json_output=False):</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        soln_trace = <span class="stringliteral">&#39;\n&#39;</span>.join([step_obj.getEqnString() <span class="keywordflow">for</span> step, step_obj <span class="keywordflow">in</span> self.solution_steps.items()])</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <span class="keywordflow">return</span> soln_trace</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="comment">#return &#39;Kuvira runs the world!! :)&#39;</span></div>
<div class="line"><a name="l00430"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_problem_parser.html#a07434850dc97a708cd945df0e3be195d">  430</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_problem_parser.html#a07434850dc97a708cd945df0e3be195d">getProblem</a>(self):</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <span class="keywordflow">return</span> self.<a class="code" href="classtotally__new__visualizer_1_1_problem_parser.html#a2922e97837374aee68052070231aa978">solution_steps</a>[0].getEqnString()</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div>
<div class="line"><a name="l00433"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_answer_set_j_s_o_n_encoder.html">  433</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtotally__new__visualizer_1_1_answer_set_j_s_o_n_encoder.html">AnswerSetJSONEncoder</a>(json.JSONEncoder):</div>
<div class="line"><a name="l00434"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_answer_set_j_s_o_n_encoder.html#a104cc50e2ac18448721cdf608aef3c90">  434</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_answer_set_j_s_o_n_encoder.html#a104cc50e2ac18448721cdf608aef3c90">default</a>(self, ans_set_mgr):</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        ans_set_dict = {}</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="keywordflow">for</span> index, problem <span class="keywordflow">in</span> enumerate(ans_set_mgr.answer_sets_dict.values()):</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            ans_set_dict[index] = self.<a class="code" href="classtotally__new__visualizer_1_1_answer_set_j_s_o_n_encoder.html#a9426d9aabb2c10aa95cd64fd7535ddfb">encodeSingleProblem</a>(problem)</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        <span class="keywordflow">return</span> json.JSONEncoder().encode(ans_set_dict) </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div>
<div class="line"><a name="l00440"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_answer_set_j_s_o_n_encoder.html#a9426d9aabb2c10aa95cd64fd7535ddfb">  440</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_answer_set_j_s_o_n_encoder.html#a9426d9aabb2c10aa95cd64fd7535ddfb">encodeSingleProblem</a>(self, problem):</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <span class="keywordflow">return</span> [self.<a class="code" href="classtotally__new__visualizer_1_1_answer_set_j_s_o_n_encoder.html#a2aff8b46377f69068f2b96a61a3225dd">encodeSingleSolution</a>(soln) <span class="keywordflow">for</span> soln <span class="keywordflow">in</span> problem] <span class="comment"># encode all steps</span></div>
<div class="line"><a name="l00442"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_answer_set_j_s_o_n_encoder.html#a2aff8b46377f69068f2b96a61a3225dd">  442</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_answer_set_j_s_o_n_encoder.html#a2aff8b46377f69068f2b96a61a3225dd">encodeSingleSolution</a>(self, solution):</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="comment"># a solution object saves a solution in a sequence of step objects</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        step_list = [ [step_obj.equation_string, step_obj.step_data] <span class="keywordflow">for</span> step_obj <span class="keywordflow">in</span> solution.solution_steps]</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="keywordflow">return</span> step_list</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">##</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment"># Store and separate all the answer sets in the input provided</span></div>
<div class="line"><a name="l00449"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_answer_set_manager.html">  449</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtotally__new__visualizer_1_1_answer_set_manager.html">AnswerSetManager</a>:</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;This class parses answer sets from stdin or json file, outputs to file in json format or user-friendly format&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00451"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_answer_set_manager.html#a6b6b2a2f3d8393f883b0f6e4846fb975">  451</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_answer_set_manager.html#a6b6b2a2f3d8393f883b0f6e4846fb975">__init__</a>(self, cmdline_args):</div>
<div class="line"><a name="l00452"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_answer_set_manager.html#a6720cc83312d81427e09bb5b3f7ceb02">  452</a></span>&#160;        self.<a class="code" href="classtotally__new__visualizer_1_1_answer_set_manager.html#a6720cc83312d81427e09bb5b3f7ceb02">cmdline_args</a> = cmdline_args</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <span class="comment"># answer set dict: problem_string --&gt; list_of_solutions (list of GeneratedProblem instances)</span></div>
<div class="line"><a name="l00454"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_answer_set_manager.html#add0e559366b050e585d2ba3f6f78def2">  454</a></span>&#160;        self.<a class="code" href="classtotally__new__visualizer_1_1_answer_set_manager.html#add0e559366b050e585d2ba3f6f78def2">answer_sets_dict</a> = defaultdict(list)</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div>
<div class="line"><a name="l00456"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_answer_set_manager.html#a3717e2b3bf3f520ba8d66bfd4e884aa7">  456</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_answer_set_manager.html#a3717e2b3bf3f520ba8d66bfd4e884aa7">initFromSTDIN</a>(self):</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;load answer sets from stdin NOTE: expects JSON input via clingo --outf=2&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        all_answer_sets = self.<a class="code" href="classtotally__new__visualizer_1_1_answer_set_manager.html#a61735c31f853c070c4af8b31710de812">__getJSONAnswerSetsFromSTDIN</a>()</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="comment"># parse the answer sets</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <span class="keywordflow">for</span> answer_set <span class="keywordflow">in</span> all_answer_sets:</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            predicates = answer_set[<span class="stringliteral">&#39;Value&#39;</span>]</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            <span class="comment"># save generated version only</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            generated_soln = <a class="code" href="classtotally__new__visualizer_1_1_problem_parser.html">ProblemParser</a>(predicates).toGeneratedSolution()</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            <span class="comment"># add solution to list of solutions for its problem</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            self.<a class="code" href="classtotally__new__visualizer_1_1_answer_set_manager.html#add0e559366b050e585d2ba3f6f78def2">answer_sets_dict</a>[generated_soln.problem_string].append(generated_soln)</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keyword">def </span>__getJSONAnswerSetsFromSTDIN(self):</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="stringliteral">&quot;&quot;&quot; read json from stdin, remove underscores, load via json module and return answer sets &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        clingo_output   = <span class="stringliteral">&#39;&#39;</span>.join(sys.stdin.xreadlines())</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        decoded_output  = json.loads(clingo_output.replace(<span class="stringliteral">&#39;_&#39;</span>, <span class="stringliteral">&#39;&#39;</span>))</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <span class="keywordflow">return</span> decoded_output[<span class="stringliteral">&#39;Call&#39;</span>][0][<span class="stringliteral">&#39;Witnesses&#39;</span>] <span class="comment"># clingo provides lots of info, we just want answer sets</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div>
<div class="line"><a name="l00473"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_answer_set_manager.html#a5db35c9928d6ff2894ab0fec0dc2b940">  473</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_answer_set_manager.html#a5db35c9928d6ff2894ab0fec0dc2b940">printAnswerSets</a>(self, json_printing=False, with_explanation=False):</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;display all answer sets in user-friendly way&quot;&quot;&quot;</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <span class="keywordflow">for</span> problem <span class="keywordflow">in</span> self.answer_sets_dict.values():</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            <span class="keywordflow">for</span> generated_solution <span class="keywordflow">in</span> problem:</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                self.<a class="code" href="classtotally__new__visualizer_1_1_answer_set_manager.html#a9a77846f767cce9d64b75a8c7f4db6fd">printSingleAnswerSet</a>(generated_solution)</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                <span class="keywordflow">print</span> <span class="stringliteral">&#39;$&#39;</span>*40</div>
<div class="line"><a name="l00479"></a><span class="lineno"><a class="line" href="classtotally__new__visualizer_1_1_answer_set_manager.html#a9a77846f767cce9d64b75a8c7f4db6fd">  479</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classtotally__new__visualizer_1_1_answer_set_manager.html#a9a77846f767cce9d64b75a8c7f4db6fd">printSingleAnswerSet</a>(self, generated_prob):</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <span class="keywordflow">for</span> step <span class="keywordflow">in</span> generated_prob.solution_steps:</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            <span class="keywordflow">print</span> step.equation_string + <span class="stringliteral">&#39;\n\n&#39;</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;            <span class="keywordflow">print</span> step.step_data</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">#  TODO: DRY out this code later</span></div>
<div class="line"><a name="l00485"></a><span class="lineno"><a class="line" href="namespacetotally__new__visualizer.html#aa58bcbc4c3c0a513fa8d58155d9d6e46">  485</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespacetotally__new__visualizer.html#aa58bcbc4c3c0a513fa8d58155d9d6e46">main</a>(cmd_line_args):</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="stringliteral">&quot;&quot;&quot; get cmd line args, initialize manager, set stdout if needed &quot;&quot;&quot;</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="comment"># get cmd line args as dictionary</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    cmd_line_args = vars(cmd_line_args)</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="comment"># create ans set manager and load with answer sets</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    manager = <a class="code" href="classtotally__new__visualizer_1_1_answer_set_manager.html">AnswerSetManager</a>(cmd_line_args)</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">if</span> cmd_line_args[<span class="stringliteral">&#39;json_input&#39;</span>]:</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        manager.initFromJSONFile(cmd_line_args[<span class="stringliteral">&#39;json_input&#39;</span>])</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        manager.initFromSTDIN()</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="comment"># set stdout accordingly</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    old_stdout = sys.stdout</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keywordflow">if</span> cmd_line_args[<span class="stringliteral">&#39;save_file&#39;</span>]:</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        sys.stdout = open(cmd_line_args[<span class="stringliteral">&#39;save_file&#39;</span>], <span class="stringliteral">&#39;w&#39;</span>)</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="comment"># print results. NOTE: prints to file if save_file parameter is used</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    json_output = cmd_line_args[<span class="stringliteral">&#39;json_output&#39;</span>] == <span class="stringliteral">&#39;true&#39;</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordflow">if</span> json_output:</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <span class="comment">#print AnswerSetJSONEncoder().encode(manager)</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="keywordflow">print</span> json.JSONEncoder().encode(manager.answer_sets_dict) </div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordflow">else</span>:</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        manager.printAnswerSets(json_printing=json_output, with_explanation=<span class="keyword">True</span>)</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="comment"># restore stdout</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    sys.stdout = old_stdout</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div>
<div class="line"><a name="l00513"></a><span class="lineno"><a class="line" href="namespacetotally__new__visualizer.html#a5ed81f6c9d94b6894d3ba36844436f9e">  513</a></span>&#160;<span class="keyword">def </span><a class="code" href="namespacetotally__new__visualizer.html#a5ed81f6c9d94b6894d3ba36844436f9e">getCmdLineArgs</a>():</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    cmd_parser = argparse.ArgumentParser(description=<span class="stringliteral">&#39;Visualizer for ASP code&#39;</span>)</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    cmd_parser.add_argument(<span class="stringliteral">&#39;--json_output&#39;</span>, default=<span class="keyword">False</span>, required=<span class="keyword">False</span>)</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    cmd_parser.add_argument(<span class="stringliteral">&#39;--save_file&#39;</span>, default=<span class="keyword">False</span>, required=<span class="keyword">False</span>) <span class="comment"># provides file name for saving result</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    cmd_parser.add_argument(<span class="stringliteral">&#39;--json_input&#39;</span>, default=<span class="keyword">False</span>, required=<span class="keyword">False</span>)</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordflow">return</span> cmd_parser.parse_args()</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="keywordflow">if</span> __name__ == <span class="stringliteral">&quot;__main__&quot;</span>:</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <a class="code" href="namespacetotally__new__visualizer.html#aa58bcbc4c3c0a513fa8d58155d9d6e46">main</a>(<a class="code" href="namespacetotally__new__visualizer.html#a5ed81f6c9d94b6894d3ba36844436f9e">getCmdLineArgs</a>())</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment"># TODO: </span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment"># test translation code on more important examples</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="comment"># ensure (x+2)/(x+2) --&gt; 1</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment"># XX finalize generation of problems with multiple solutions</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment"># XX change answer_set manager to store problems based on initial generated problem, and to save solutions later</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment"># write script to merge all json files into one thingy (if necessary)</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment"># test multiple solns on a problem with more steps</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment"># XX handle factor_data</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment"># not producing all solutions!!</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">##### wish list</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment"># change explanation storage to use namedtuple to conveniently access the explanations</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment">#   convert to other format when printing or using json output</span></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_equation_step_parser_html_ad4a30f362747a194b4f3e36ca5ddc238"><div class="ttname"><a href="classtotally__new__visualizer_1_1_equation_step_parser.html#ad4a30f362747a194b4f3e36ca5ddc238">totally_new_visualizer.EquationStepParser.getEqnString</a></div><div class="ttdeci">def getEqnString</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00182">totally_new_visualizer.py:182</a></div></div>
<div class="ttc" id="classmodel__manager_1_1_model_manager_html"><div class="ttname"><a href="classmodel__manager_1_1_model_manager.html">model_manager.ModelManager</a></div><div class="ttdef"><b>Definition:</b> <a href="model__manager_8py_source.html#l00010">model_manager.py:10</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_equation_step_parser_html_a9fd629de7e40b3f7764fb91e9d1c7962"><div class="ttname"><a href="classtotally__new__visualizer_1_1_equation_step_parser.html#a9fd629de7e40b3f7764fb91e9d1c7962">totally_new_visualizer.EquationStepParser.misc_data</a></div><div class="ttdeci">misc_data</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00052">totally_new_visualizer.py:52</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_equation_step_parser_html_a4d4b598b9a729895cdaadae73f407d83"><div class="ttname"><a href="classtotally__new__visualizer_1_1_equation_step_parser.html#a4d4b598b9a729895cdaadae73f407d83">totally_new_visualizer.EquationStepParser.makeEqnString</a></div><div class="ttdeci">def makeEqnString(self, root_node)</div><div class="ttdoc">generates the string representation of a subexpression </div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00269">totally_new_visualizer.py:269</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_problem_parser_html_a2922e97837374aee68052070231aa978"><div class="ttname"><a href="classtotally__new__visualizer_1_1_problem_parser.html#a2922e97837374aee68052070231aa978">totally_new_visualizer.ProblemParser.solution_steps</a></div><div class="ttdeci">solution_steps</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00331">totally_new_visualizer.py:331</a></div></div>
<div class="ttc" id="namespacepred__parser_html_a918636a789322106c44f3ab3a40c4eb3"><div class="ttname"><a href="namespacepred__parser.html#a918636a789322106c44f3ab3a40c4eb3">pred_parser.findInArgList</a></div><div class="ttdeci">def findInArgList(pred_obj, pred_name)</div><div class="ttdef"><b>Definition:</b> <a href="pred__parser_8py_source.html#l00081">pred_parser.py:81</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_equation_step_parser_html_a8aaaf60180dffc7f531cd56df9bcc891"><div class="ttname"><a href="classtotally__new__visualizer_1_1_equation_step_parser.html#a8aaaf60180dffc7f531cd56df9bcc891">totally_new_visualizer.EquationStepParser.makeMonomialFromData</a></div><div class="ttdeci">def makeMonomialFromData</div><div class="ttdoc">make a monomial string </div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00296">totally_new_visualizer.py:296</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_answer_set_j_s_o_n_encoder_html_a2aff8b46377f69068f2b96a61a3225dd"><div class="ttname"><a href="classtotally__new__visualizer_1_1_answer_set_j_s_o_n_encoder.html#a2aff8b46377f69068f2b96a61a3225dd">totally_new_visualizer.AnswerSetJSONEncoder.encodeSingleSolution</a></div><div class="ttdeci">def encodeSingleSolution(self, solution)</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00442">totally_new_visualizer.py:442</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_equation_step_parser_html_a025ac2e5112841d4b340029c120412f2"><div class="ttname"><a href="classtotally__new__visualizer_1_1_equation_step_parser.html#a025ac2e5112841d4b340029c120412f2">totally_new_visualizer.EquationStepParser.__init__</a></div><div class="ttdeci">def __init__</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00046">totally_new_visualizer.py:46</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_answer_set_manager_html_a5db35c9928d6ff2894ab0fec0dc2b940"><div class="ttname"><a href="classtotally__new__visualizer_1_1_answer_set_manager.html#a5db35c9928d6ff2894ab0fec0dc2b940">totally_new_visualizer.AnswerSetManager.printAnswerSets</a></div><div class="ttdeci">def printAnswerSets</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00473">totally_new_visualizer.py:473</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_answer_set_manager_html_a3717e2b3bf3f520ba8d66bfd4e884aa7"><div class="ttname"><a href="classtotally__new__visualizer_1_1_answer_set_manager.html#a3717e2b3bf3f520ba8d66bfd4e884aa7">totally_new_visualizer.AnswerSetManager.initFromSTDIN</a></div><div class="ttdeci">def initFromSTDIN(self)</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00456">totally_new_visualizer.py:456</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_problem_parser_html_a07434850dc97a708cd945df0e3be195d"><div class="ttname"><a href="classtotally__new__visualizer_1_1_problem_parser.html#a07434850dc97a708cd945df0e3be195d">totally_new_visualizer.ProblemParser.getProblem</a></div><div class="ttdeci">def getProblem(self)</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00430">totally_new_visualizer.py:430</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_problem_parser_html_a27138f0c72c9ab44f6e951b63159b05f"><div class="ttname"><a href="classtotally__new__visualizer_1_1_problem_parser.html#a27138f0c72c9ab44f6e951b63159b05f">totally_new_visualizer.ProblemParser.soln_list</a></div><div class="ttdeci">soln_list</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00336">totally_new_visualizer.py:336</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_equation_step_parser_html_acdeafbce50645287ac85046e93191c5a"><div class="ttname"><a href="classtotally__new__visualizer_1_1_equation_step_parser.html#acdeafbce50645287ac85046e93191c5a">totally_new_visualizer.EquationStepParser.toGeneratedStep</a></div><div class="ttdeci">def toGeneratedStep(self)</div><div class="ttdoc">EquationStepParser contains lots of data we don&#39;t need after parsing this method returns a GeneratedS...</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00065">totally_new_visualizer.py:65</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_problem_parser_html_ae641da32655919b48a93bb263a565157"><div class="ttname"><a href="classtotally__new__visualizer_1_1_problem_parser.html#ae641da32655919b48a93bb263a565157">totally_new_visualizer.ProblemParser.solutionLevelPostProcessing</a></div><div class="ttdeci">def solutionLevelPostProcessing(self)</div><div class="ttdoc">After all predicates are parsed, see if any post-processing needs to be done. </div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00395">totally_new_visualizer.py:395</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_equation_step_parser_html"><div class="ttname"><a href="classtotally__new__visualizer_1_1_equation_step_parser.html">totally_new_visualizer.EquationStepParser</a></div><div class="ttdoc">Parses predicates related to one step of a solution trace contains the data members: var_str – what ...</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00043">totally_new_visualizer.py:43</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_equation_step_parser_html_aef7a56859ca1922b836ddd56370288bb"><div class="ttname"><a href="classtotally__new__visualizer_1_1_equation_step_parser.html#aef7a56859ca1922b836ddd56370288bb">totally_new_visualizer.EquationStepParser.translateSingleExplanation</a></div><div class="ttdeci">def translateSingleExplanation(self, explanation_sentences, translations)</div><div class="ttdoc">translates a single explanation array to use binary nodes an explanation array is a list of elements ...</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00253">totally_new_visualizer.py:253</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_problem_parser_html_a63fff6bd2c3015c278433317fc7c8e32"><div class="ttname"><a href="classtotally__new__visualizer_1_1_problem_parser.html#a63fff6bd2c3015c278433317fc7c8e32">totally_new_visualizer.ProblemParser.sub_data</a></div><div class="ttdeci">sub_data</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00335">totally_new_visualizer.py:335</a></div></div>
<div class="ttc" id="namespacetotally__new__visualizer_html_ab9dc95295259f8165e1fdf15f954d2b1"><div class="ttname"><a href="namespacetotally__new__visualizer.html#ab9dc95295259f8165e1fdf15f954d2b1">totally_new_visualizer.GeneratedSolution</a></div><div class="ttdeci">tuple GeneratedSolution</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00321">totally_new_visualizer.py:321</a></div></div>
<div class="ttc" id="namespacepred__parser_html_aafbae146acf181131bb122c749d70997"><div class="ttname"><a href="namespacepred__parser.html#aafbae146acf181131bb122c749d70997">pred_parser.predicateStringToParsedPredicate</a></div><div class="ttdeci">def predicateStringToParsedPredicate(string)</div><div class="ttdef"><b>Definition:</b> <a href="pred__parser_8py_source.html#l00015">pred_parser.py:15</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_answer_set_j_s_o_n_encoder_html_a9426d9aabb2c10aa95cd64fd7535ddfb"><div class="ttname"><a href="classtotally__new__visualizer_1_1_answer_set_j_s_o_n_encoder.html#a9426d9aabb2c10aa95cd64fd7535ddfb">totally_new_visualizer.AnswerSetJSONEncoder.encodeSingleProblem</a></div><div class="ttdeci">def encodeSingleProblem(self, problem)</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00440">totally_new_visualizer.py:440</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_equation_step_parser_html_a8e28e68df8ed9c7a34890d4ae6a6e2b9"><div class="ttname"><a href="classtotally__new__visualizer_1_1_equation_step_parser.html#a8e28e68df8ed9c7a34890d4ae6a6e2b9">totally_new_visualizer.EquationStepParser.addHoldsPredicate</a></div><div class="ttdeci">def addHoldsPredicate(self, holds_pred)</div><div class="ttdoc">save field/value info for a node that is expressed as a holds/2 predicate </div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00072">totally_new_visualizer.py:72</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_problem_parser_html_ada04c87da73191c9d9dd21f4bc7adbb9"><div class="ttname"><a href="classtotally__new__visualizer_1_1_problem_parser.html#ada04c87da73191c9d9dd21f4bc7adbb9">totally_new_visualizer.ProblemParser.toGeneratedSolution</a></div><div class="ttdeci">def toGeneratedSolution(self)</div><div class="ttdoc">EquationStepParser contains lots of data we don&#39;t need after parsing this method returns a GeneratedS...</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00344">totally_new_visualizer.py:344</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_answer_set_manager_html_a61735c31f853c070c4af8b31710de812"><div class="ttname"><a href="classtotally__new__visualizer_1_1_answer_set_manager.html#a61735c31f853c070c4af8b31710de812">totally_new_visualizer.AnswerSetManager.__getJSONAnswerSetsFromSTDIN</a></div><div class="ttdeci">def __getJSONAnswerSetsFromSTDIN(self)</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00467">totally_new_visualizer.py:467</a></div></div>
<div class="ttc" id="namespacetotally__new__visualizer_html_aa58bcbc4c3c0a513fa8d58155d9d6e46"><div class="ttname"><a href="namespacetotally__new__visualizer.html#aa58bcbc4c3c0a513fa8d58155d9d6e46">totally_new_visualizer.main</a></div><div class="ttdeci">def main(cmd_line_args)</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00485">totally_new_visualizer.py:485</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_answer_set_j_s_o_n_encoder_html"><div class="ttname"><a href="classtotally__new__visualizer_1_1_answer_set_j_s_o_n_encoder.html">totally_new_visualizer.AnswerSetJSONEncoder</a></div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00433">totally_new_visualizer.py:433</a></div></div>
<div class="ttc" id="namespacepred__parser_html_a29597ce97183f1be99e6a96d16d767db"><div class="ttname"><a href="namespacepred__parser.html#a29597ce97183f1be99e6a96d16d767db">pred_parser.getTimeFromPredObject</a></div><div class="ttdeci">def getTimeFromPredObject(pred_obj)</div><div class="ttdef"><b>Definition:</b> <a href="pred__parser_8py_source.html#l00067">pred_parser.py:67</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_equation_step_parser_html_a0a9f53c1c140fecd4e5d6bd6bda9ae7e"><div class="ttname"><a href="classtotally__new__visualizer_1_1_equation_step_parser.html#a0a9f53c1c140fecd4e5d6bd6bda9ae7e">totally_new_visualizer.EquationStepParser.makeAlmostFireExplanations</a></div><div class="ttdeci">def makeAlmostFireExplanations(self, model_mgr)</div><div class="ttdoc">For every strategy we don&#39;t have an explanation for, see if we have any &#39;almost fire&#39; explanations...</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00139">totally_new_visualizer.py:139</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_equation_step_parser_html_ac5cad9ea5ae6ed0d1c86a506b0a0e76e"><div class="ttname"><a href="classtotally__new__visualizer_1_1_equation_step_parser.html#ac5cad9ea5ae6ed0d1c86a506b0a0e76e">totally_new_visualizer.EquationStepParser.strategy_data</a></div><div class="ttdeci">strategy_data</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00053">totally_new_visualizer.py:53</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_equation_step_parser_html_aee458203f9e3923538d93d619a09894c"><div class="ttname"><a href="classtotally__new__visualizer_1_1_equation_step_parser.html#aee458203f9e3923538d93d619a09894c">totally_new_visualizer.EquationStepParser.translateListOfStrings</a></div><div class="ttdeci">def translateListOfStrings(self, string_list, translations)</div><div class="ttdoc">translate a list of strings so nodes match a binary tree representation </div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00261">totally_new_visualizer.py:261</a></div></div>
<div class="ttc" id="namespacetotally__new__visualizer_html_a69a6b4328317f3ea8abc150eafbda370"><div class="ttname"><a href="namespacetotally__new__visualizer.html#a69a6b4328317f3ea8abc150eafbda370">totally_new_visualizer.GeneratedStep</a></div><div class="ttdeci">tuple GeneratedStep</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00035">totally_new_visualizer.py:35</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_answer_set_manager_html"><div class="ttname"><a href="classtotally__new__visualizer_1_1_answer_set_manager.html">totally_new_visualizer.AnswerSetManager</a></div><div class="ttdoc">Store and separate all the answer sets in the input provided. </div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00449">totally_new_visualizer.py:449</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_problem_parser_html_aac1f2db24f810523852a67dbb69bfe5f"><div class="ttname"><a href="classtotally__new__visualizer_1_1_problem_parser.html#aac1f2db24f810523852a67dbb69bfe5f">totally_new_visualizer.ProblemParser.getXSolnIfSubstitutionOccurs</a></div><div class="ttdeci">def getXSolnIfSubstitutionOccurs(self)</div><div class="ttdoc">Add soulutions for x if y-substitution is used; solver only solves for y if y substitution is used...</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00401">totally_new_visualizer.py:401</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_equation_step_parser_html_a021358bd55a4cea135012d4a83138711"><div class="ttname"><a href="classtotally__new__visualizer_1_1_equation_step_parser.html#a021358bd55a4cea135012d4a83138711">totally_new_visualizer.EquationStepParser.var_str</a></div><div class="ttdeci">var_str</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00047">totally_new_visualizer.py:47</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_answer_set_j_s_o_n_encoder_html_a104cc50e2ac18448721cdf608aef3c90"><div class="ttname"><a href="classtotally__new__visualizer_1_1_answer_set_j_s_o_n_encoder.html#a104cc50e2ac18448721cdf608aef3c90">totally_new_visualizer.AnswerSetJSONEncoder.default</a></div><div class="ttdeci">def default(self, ans_set_mgr)</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00434">totally_new_visualizer.py:434</a></div></div>
<div class="ttc" id="namespacepred__parser_html_a2a6fff2c8801ac4b209b04d97653a9d8"><div class="ttname"><a href="namespacepred__parser.html#a2a6fff2c8801ac4b209b04d97653a9d8">pred_parser.holdsObjectToNodeFieldValue</a></div><div class="ttdeci">def holdsObjectToNodeFieldValue(holds_pred)</div><div class="ttdef"><b>Definition:</b> <a href="pred__parser_8py_source.html#l00097">pred_parser.py:97</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_problem_parser_html_a922001a638e085fc2ab3e08254eb60de"><div class="ttname"><a href="classtotally__new__visualizer_1_1_problem_parser.html#a922001a638e085fc2ab3e08254eb60de">totally_new_visualizer.ProblemParser.getSolutionString</a></div><div class="ttdeci">def getSolutionString</div><div class="ttdoc">TODO: for debugging purposes only, remove later!! </div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00426">totally_new_visualizer.py:426</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_problem_parser_html_a9ebe340d4c51febfe4b32a167d97e353"><div class="ttname"><a href="classtotally__new__visualizer_1_1_problem_parser.html#a9ebe340d4c51febfe4b32a167d97e353">totally_new_visualizer.ProblemParser.parseAnsSetFromPredicates</a></div><div class="ttdeci">def parseAnsSetFromPredicates(self, predicates_list)</div><div class="ttdoc">parse the given predicates into the steps the describe </div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00362">totally_new_visualizer.py:362</a></div></div>
<div class="ttc" id="namespacetotally__new__visualizer_html_a5ed81f6c9d94b6894d3ba36844436f9e"><div class="ttname"><a href="namespacetotally__new__visualizer.html#a5ed81f6c9d94b6894d3ba36844436f9e">totally_new_visualizer.getCmdLineArgs</a></div><div class="ttdeci">def getCmdLineArgs()</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00513">totally_new_visualizer.py:513</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_answer_set_manager_html_a6b6b2a2f3d8393f883b0f6e4846fb975"><div class="ttname"><a href="classtotally__new__visualizer_1_1_answer_set_manager.html#a6b6b2a2f3d8393f883b0f6e4846fb975">totally_new_visualizer.AnswerSetManager.__init__</a></div><div class="ttdeci">def __init__(self, cmdline_args)</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00451">totally_new_visualizer.py:451</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_problem_parser_html_a3c480d50bf72818a2db48543b431bcbc"><div class="ttname"><a href="classtotally__new__visualizer_1_1_problem_parser.html#a3c480d50bf72818a2db48543b431bcbc">totally_new_visualizer.ProblemParser.addPredicateForTimeStep</a></div><div class="ttdeci">def addPredicateForTimeStep(self, time, pred_obj)</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00356">totally_new_visualizer.py:356</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_equation_step_parser_html_a0ea8c9f9125d10c34db60080cb98087e"><div class="ttname"><a href="classtotally__new__visualizer_1_1_equation_step_parser.html#a0ea8c9f9125d10c34db60080cb98087e">totally_new_visualizer.EquationStepParser.addStrategyPredicate</a></div><div class="ttdeci">def addStrategyPredicate(self, pred_obj)</div><div class="ttdoc">Add a predicate of the type &#39;strategyExplanation&#39;. </div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00088">totally_new_visualizer.py:88</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_equation_step_parser_html_ad7bb7147eedff025bb568ecb8826ce08"><div class="ttname"><a href="classtotally__new__visualizer_1_1_equation_step_parser.html#ad7bb7147eedff025bb568ecb8826ce08">totally_new_visualizer.EquationStepParser.node_data</a></div><div class="ttdeci">node_data</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00049">totally_new_visualizer.py:49</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_equation_step_parser_html_a25048323c9f80cbb0ea140985dfc1333"><div class="ttname"><a href="classtotally__new__visualizer_1_1_equation_step_parser.html#a25048323c9f80cbb0ea140985dfc1333">totally_new_visualizer.EquationStepParser.translateStrategyData</a></div><div class="ttdeci">def translateStrategyData(self)</div><div class="ttdoc">use translator from translate_tree_nodes module to convert the node id&#39;s in node_data to a binary tre...</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00198">totally_new_visualizer.py:198</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_equation_step_parser_html_adcf8eb027974aa76205cbd1e42604919"><div class="ttname"><a href="classtotally__new__visualizer_1_1_equation_step_parser.html#adcf8eb027974aa76205cbd1e42604919">totally_new_visualizer.EquationStepParser.optimal_operands</a></div><div class="ttdeci">optimal_operands</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00055">totally_new_visualizer.py:55</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_equation_step_parser_html_a51372d5ce7c1fec1c4a1a7f7f8bfe3de"><div class="ttname"><a href="classtotally__new__visualizer_1_1_equation_step_parser.html#a51372d5ce7c1fec1c4a1a7f7f8bfe3de">totally_new_visualizer.EquationStepParser.makeAlmostFireExplanationFor</a></div><div class="ttdeci">def makeAlmostFireExplanationFor(self, strategy, model_mgr)</div><div class="ttdoc">For a given strategy check all heuristics in that strategy type to see if any of them almost fire...</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00149">totally_new_visualizer.py:149</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_equation_step_parser_html_a3c973167ae47c603bf5f6ed2e04eea10"><div class="ttname"><a href="classtotally__new__visualizer_1_1_equation_step_parser.html#a3c973167ae47c603bf5f6ed2e04eea10">totally_new_visualizer.EquationStepParser.makeExplanation</a></div><div class="ttdeci">def makeExplanation(self, model_mgr)</div><div class="ttdoc">uses model manager to lookup an explanation template for the action taken in this step...</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00221">totally_new_visualizer.py:221</a></div></div>
<div class="ttc" id="namespacepred__parser_html_a97b4149316ed6221e074bffd1d58e43c"><div class="ttname"><a href="namespacepred__parser.html#a97b4149316ed6221e074bffd1d58e43c">pred_parser.argsToListOfStrings</a></div><div class="ttdeci">def argsToListOfStrings(pred_obj)</div><div class="ttdef"><b>Definition:</b> <a href="pred__parser_8py_source.html#l00089">pred_parser.py:89</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_problem_parser_html"><div class="ttname"><a href="classtotally__new__visualizer_1_1_problem_parser.html">totally_new_visualizer.ProblemParser</a></div><div class="ttdoc">Handles the parsing of a single generated problem. </div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00326">totally_new_visualizer.py:326</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_answer_set_manager_html_a6720cc83312d81427e09bb5b3f7ceb02"><div class="ttname"><a href="classtotally__new__visualizer_1_1_answer_set_manager.html#a6720cc83312d81427e09bb5b3f7ceb02">totally_new_visualizer.AnswerSetManager.cmdline_args</a></div><div class="ttdeci">cmdline_args</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00452">totally_new_visualizer.py:452</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_equation_step_parser_html_ae60e437d9daae3ce0a8dae2fd8e60260"><div class="ttname"><a href="classtotally__new__visualizer_1_1_equation_step_parser.html#ae60e437d9daae3ce0a8dae2fd8e60260">totally_new_visualizer.EquationStepParser.addParsedPredicate</a></div><div class="ttdeci">def addParsedPredicate(self, pred_obj)</div><div class="ttdoc">Top level method called externally to add any predicate related to this time step. </div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00110">totally_new_visualizer.py:110</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_problem_parser_html_a8c74392fb4a04b5c3215fa594c1a223d"><div class="ttname"><a href="classtotally__new__visualizer_1_1_problem_parser.html#a8c74392fb4a04b5c3215fa594c1a223d">totally_new_visualizer.ProblemParser.__init__</a></div><div class="ttdeci">def __init__(self, answer_set_predicates)</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00329">totally_new_visualizer.py:329</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_answer_set_manager_html_a9a77846f767cce9d64b75a8c7f4db6fd"><div class="ttname"><a href="classtotally__new__visualizer_1_1_answer_set_manager.html#a9a77846f767cce9d64b75a8c7f4db6fd">totally_new_visualizer.AnswerSetManager.printSingleAnswerSet</a></div><div class="ttdeci">def printSingleAnswerSet(self, generated_prob)</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00479">totally_new_visualizer.py:479</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_equation_step_parser_html_a2eb2f89d46d274c80c7930a5f5fc9623"><div class="ttname"><a href="classtotally__new__visualizer_1_1_equation_step_parser.html#a2eb2f89d46d274c80c7930a5f5fc9623">totally_new_visualizer.EquationStepParser.makeMonomial</a></div><div class="ttdeci">def makeMonomial(self, node_name)</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00315">totally_new_visualizer.py:315</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_equation_step_parser_html_a1d2445c87a6b9d8400ef8c78ea2e5919"><div class="ttname"><a href="classtotally__new__visualizer_1_1_equation_step_parser.html#a1d2445c87a6b9d8400ef8c78ea2e5919">totally_new_visualizer.EquationStepParser.optimal_action</a></div><div class="ttdeci">optimal_action</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00054">totally_new_visualizer.py:54</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_answer_set_manager_html_add0e559366b050e585d2ba3f6f78def2"><div class="ttname"><a href="classtotally__new__visualizer_1_1_answer_set_manager.html#add0e559366b050e585d2ba3f6f78def2">totally_new_visualizer.AnswerSetManager.answer_sets_dict</a></div><div class="ttdeci">answer_sets_dict</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00454">totally_new_visualizer.py:454</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_equation_step_parser_html_aef1f6ba0922d50500fcf66e026effede"><div class="ttname"><a href="classtotally__new__visualizer_1_1_equation_step_parser.html#aef1f6ba0922d50500fcf66e026effede">totally_new_visualizer.EquationStepParser.postProcessStepData</a></div><div class="ttdeci">def postProcessStepData(self, model_mgr)</div><div class="ttdoc">handles all post-processing after step parser has received all predicates for this step NOTE: must be...</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00163">totally_new_visualizer.py:163</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_equation_step_parser_html_a7fd1c20efb5a99c2198f0731c9c9aba1"><div class="ttname"><a href="classtotally__new__visualizer_1_1_equation_step_parser.html#a7fd1c20efb5a99c2198f0731c9c9aba1">totally_new_visualizer.EquationStepParser.updateVariable</a></div><div class="ttdeci">def updateVariable(self, new_var)</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00059">totally_new_visualizer.py:59</a></div></div>
<div class="ttc" id="classtotally__new__visualizer_1_1_problem_parser_html_afcfb1a63e8fe352e8e9a2737ea1654f5"><div class="ttname"><a href="classtotally__new__visualizer_1_1_problem_parser.html#afcfb1a63e8fe352e8e9a2737ea1654f5">totally_new_visualizer.ProblemParser.updateVariablesIfSubstitutionOccurs</a></div><div class="ttdeci">def updateVariablesIfSubstitutionOccurs(self)</div><div class="ttdoc">if y-substitution is used, update the variable used for each step after the substitution ...</div><div class="ttdef"><b>Definition:</b> <a href="totally__new__visualizer_8py_source.html#l00417">totally_new_visualizer.py:417</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="totally__new__visualizer_8py.html">totally_new_visualizer.py</a></li>
    <li class="footer">Generated on Thu Apr 16 2015 16:56:07 for algebra_heuristics by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
